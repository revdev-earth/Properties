model MaintenanceInfoProperty {
    id         Int      @id @default(autoincrement())
    propertyId String   @unique // Foreign key to Property model
    property   Property @relation(fields: [propertyId], references: [id])

    annualBudget     Float
    accumulatedCosts Float // Total accumulated maintenance costs
    costDistribution String? // Breakdown of costs between owner and tenant

    maintenance          Maintenance[]
    equipmentMaintenance MaintenanceEquipment[]
}

model Maintenance {
    id                        Int                     @id @default(autoincrement())
    maintenanceInfoPropertyId Int // Clave foránea al modelo Property
    maintenanceInfoProperty   MaintenanceInfoProperty @relation(fields: [maintenanceInfoPropertyId], references: [id])

    providerId         Int?                 @unique
    provider           MaintenanceProvider? @relation(fields: [providerId], references: [id])
    maintenanceNotesId Int?                 @unique
    maintenanceNotes   MaintenanceNotes?    @relation(fields: [maintenanceNotesId], references: [id])

    // Información de mantenimiento
    type                String // Tipo de mantenimiento: "preventive", "corrective", "request"
    task                String // Descripción de la tarea (por ejemplo, "Limpieza de AC", "Reemplazo de ventana")
    frequency           String? // Solo para mantenimiento preventivo: "mensual", "trimestral", "anual"
    maintenanceDate     DateTime // Fecha del mantenimiento realizado o programado
    nextMaintenanceDate DateTime? // Fecha del próximo mantenimiento programado (solo para preventivo)

    // Mantenimiento correctivo / Solicitudes
    damageDescription String? // Descripción del daño (solo para mantenimiento correctivo o solicitudes)
    status            String? // Estado de la solicitud (pendiente, en proceso, completado)
    repairCost        Float? // Costo de la reparación (solo para mantenimiento correctivo)
    costResponsible   String // Inquilino o propietario, quien es responsable del costo
    // Información adicional
    warranty          String? // Detalles de la garantía si aplica (solo para reparaciones)
    observations      String? // Notas adicionales sobre el mantenimiento
    createdAt         DateTime @default(now())
    updatedAt         DateTime @updatedAt
}

model MaintenanceEquipment {
    id                        Int                     @id @default(autoincrement())
    maintenanceInfoPropertyId Int // Clave foránea al modelo Property
    maintenanceInfoProperty   MaintenanceInfoProperty @relation(fields: [maintenanceInfoPropertyId], references: [id])

    providerId         Int?                 @unique
    provider           MaintenanceProvider? @relation(fields: [providerId], references: [id])
    maintenanceNotesId Int?                 @unique
    maintenanceNotes   MaintenanceNotes?    @relation(fields: [maintenanceNotesId], references: [id])

    // Detalles de mantenimiento de equipos
    equipmentName        String // Nombre del equipo (por ejemplo, refrigerador, aire acondicionado)
    maintenanceFrequency String // Frecuencia de mantenimiento: "mensual", "anual"
    lastMaintenanceDate  DateTime // Fecha del último mantenimiento realizado
    nextMaintenanceDate  DateTime? // Fecha del próximo mantenimiento programado
    warrantyPolicy       String? // Política de garantía para el equipo (si aplica)
    maintenanceCost      Float? // Costo estimado para el mantenimiento del equipo
    costResponsible      String // Quien es responsable del costo: inquilino o propietario
    createdAt            DateTime  @default(now())
    updatedAt            DateTime  @updatedAt
}

model MaintenanceProvider {
    id                   Int                    @id @default(autoincrement())
    maintenance          Maintenance[]
    equipmentMaintenance MaintenanceEquipment[]

    // Información del proveedor
    name             String // Nombre del proveedor
    servicesProvided String // Servicios proporcionados (por ejemplo, plomería, electricidad, pintura)
    contactPhone     String // Teléfono de contacto
    contactEmail     String? // Correo electrónico de contacto
    availability     String? // Disponibilidad del proveedor (por ejemplo, solo días laborales, cita requerida)
    contractDetails  String? // Detalles del contrato de mantenimiento, si aplica

    createdAt DateTime @default(now())
    updatedAt DateTime @updatedAt
}

model MaintenanceNotes {
    id                   Int                    @id @default(autoincrement())
    maintenance          Maintenance[]
    equipmentMaintenance MaintenanceEquipment[]

    // Additional Notes and Recommendations
    usageRecommendations    String? // Tips for proper use and care of the property
    specialTasks            String? // Non-periodic tasks (e.g., seasonal preparations)
    sustainabilityPractices String? // Suggestions for sustainable practices
    createdAt               DateTime @default(now())
    updatedAt               DateTime @updatedAt
}
